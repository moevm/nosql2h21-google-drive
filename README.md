# nosql2h21-google-drive

## Прототип (запуск вручную)

Порядок запуска:

1. Убеждаемся, что mongod (демон СУБД называется mongod, не mongodb) запущен (например, `pgrep -a mongod`, или если есть сервис systemd, `systemctl status mongod`)

2. Убеждаемся, что мы активировали виртуальное окружение и что в нём установлены все пакеты. Пример как это всё сделать в первый раз (виртуальное окружение будет в каталоге venv):

   ```sh
   python3 -m venv venv
   source venv/bin/activate
   pip3 install -r requirements.txt
   ```

3. Скачиваем JSON файл с "секретами" из консоли Google Cloud Platform. Называем его `secrets/client-secret.json`. Файл должен соответствовать OAuth 2.0 Client ID, вариант для веб-сервера (с одним или несколькими путями для редиректа).

4. Для запуска скрипта:

   ```sh
   src/main.py
   ```

   На 127.0.0.1:8085 запустится веб-сервер.

Важно: Google не принимает хостнейм `localhost` в URL перенаправления, поэтому заходить на веб-страницы программы при локальном запуске нужно именно через `127.0.0.1`.

Если в JSON файле с "секретами" указано несколько путь перенаправления, нужный подбирается по заголовку `Host` запроса.
